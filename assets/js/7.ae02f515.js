(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{191:function(e,t,s){e.exports=s.p+"assets/img/foreach.b15dc61a.png"},192:function(e,t,s){e.exports=s.p+"assets/img/WithoutSelect.52e5f4fc.png"},236:function(e,t,s){"use strict";s.r(t);var r=[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{attrs:{id:"select的應用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select的應用","aria-hidden":"true"}},[this._v("#")]),this._v(" Select的應用")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("前面累積了這麼多的觀念，現在終於要用上了，我們要來正式介紹第一個LINQ語法"),t("code",[this._v("Select")]),this._v("了。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"格式說明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#格式說明","aria-hidden":"true"}},[this._v("#")]),this._v(" 格式說明")])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("功能說明: 語法的功用")]),e._v(" "),s("li",[e._v("方法定義: 語法的方法定義")]),e._v(" "),s("li",[e._v("查詢運算式: 此語法的運算是使用方法")]),e._v(" "),s("li",[e._v("方法範例: 使用各個方法實作例子")]),e._v(" "),s("li",[e._v("特別之處: 語法的特性說明")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"功能說明"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#功能說明","aria-hidden":"true"}},[this._v("#")]),this._v(" 功能說明")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("code",[this._v("Select")]),this._v("運算子可以將集合中的"),t("strong",[this._v("每一個元素以新的形式輸出")]),this._v("，其用法與SQL的"),t("code",[this._v("Select")]),this._v("相似。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"方法定義"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#方法定義","aria-hidden":"true"}},[this._v("#")]),this._v(" 方法定義")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("public static IEnumerable<TResult> Select<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, TResult> selector);\n\npublic static IEnumerable<TResult> Select<TSource, TResult>(this IEnumerable<TSource> source, Func<TSource, int, TResult> selector)\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("p",[e._v("兩種方法的差別在於第二個委派參數"),s("code",[e._v("Selector")]),e._v("，兩個委派方法差了一個"),s("code",[e._v("int")]),e._v("傳入參數，這個"),s("code",[e._v("int")]),e._v("其實就是集合的"),s("code",[e._v("index")]),e._v("，工程師可以利用這個傳入參數取得目前元素在集合中的位置。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"查詢運算式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查詢運算式","aria-hidden":"true"}},[this._v("#")]),this._v(" 查詢運算式")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-antlr extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("select_clause\n    : 'select' expression\n    ;\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("ul",[t("li",[t("code",[this._v("expression")]),this._v(": 在每個元素上你要取得的資料物件")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("from x in Products\nselect x.ProductName\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("第一行的"),s("code",[e._v("from")]),e._v("是將產品("),s("code",[e._v("Products")]),e._v(")這個集合上的每一個元素以"),s("code",[e._v("x")]),e._v("來表示")]),e._v(" "),s("li",[e._v("第二行的"),s("code",[e._v("select")]),e._v("代表說要將每一個元素("),s("code",[e._v("x")]),e._v(")的產品名稱("),s("code",[e._v("ProductName")]),e._v(")輸出")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("當有多個資料想要藉由"),t("code",[this._v("select")]),this._v("輸出時，也可以用"),t("strong",[this._v("Anonymous types和Object Initializer")]),this._v("來達到此目的:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("from x in Products\nselect new {x.ProductName, x.UnitPrice}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("看到這裡我們知道"),t("code",[this._v("expression")]),this._v("其實就是一個變數或是一個類別，而這個變數(或類別)就是你期望在每個元素上取得的資料。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#例子","aria-hidden":"true"}},[this._v("#")]),this._v(" 例子")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("// Using query expression syntax.\nvar query = from x in Products\nselect new {x.ProductName, x.UnitPrice};\n\n// Using method-based query syntax.\nvar method = Products\n   .Select (\n      x => \n         new  \n         {\n            ProductName = x.ProductName, \n            UnitPrice = x.UnitPrice\n         }\n   );\n")])])])},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ul",[s("li",[e._v("Query的"),s("code",[e._v("from")]),e._v("的目的就是要確定"),s("strong",[e._v("資料來源")]),e._v("及其在"),s("strong",[e._v("Lambda運算式中的別名")])]),e._v(" "),s("li",[e._v("Query的"),s("code",[e._v("Select")]),e._v("後面接的其實就是"),s("strong",[e._v("Lambda expression")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("上面的例子沒有使用到"),t("code",[this._v("index")]),this._v("這個參數，現在我們來看個有"),t("code",[this._v("index")]),this._v("的例子:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v('string[] data = { "No1", "No2", "No3", "No4", "No5"};\n\nvar query =\n    data.Select((item, index) => new { index, item });\n\nforeach (var obj in query)\n{\n    Console.WriteLine("{0}", obj);\n}\n\n/*\n * { index = 0, item = No1 }\n * { index = 1, item = No2 }\n * { index = 2, item = No3 }\n * { index = 3, item = No4 }\n * { index = 4, item = No5 }\n*/\n')])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("我們可以看到這個"),t("code",[this._v("index")]),this._v("的資訊也會進入每一個元素中，對於需要知道元素位置的處理很有幫助。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"特別之處"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特別之處","aria-hidden":"true"}},[this._v("#")]),this._v(" 特別之處")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"select效率超高"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select效率超高","aria-hidden":"true"}},[this._v("#")]),this._v(" Select效率超高?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("IEnumerable<int> afterSelect =\n\tEnumerable.Range(1, 1000000000).Select(x => x * 2);\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("這例子是"),t("strong",[this._v("產生一個1到1000000000的數列，每個元素輸出兩倍的數字")]),this._v("。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("如果認為會跑很慢的人，沒關係，這邊再給一個提示: 接下來"),t("strong",[this._v("對"),t("code",[this._v("afterSelect")]),this._v("做"),t("code",[this._v("foreach")]),this._v("的花費是多還是少")]),this._v("呢?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("foreach(var result in afterSelect){}\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:s(191),alt:"foreach"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("Select少了很多對吧，其實Select它有"),t("strong",[this._v("延遲執行")]),this._v("的特性，意思是說你叫用它時，它不會馬上去巡覽所有的元素，而是會等到你叫用"),t("code",[this._v("GetEnumerator()")]),this._v("或是"),t("code",[this._v("foreach")]),this._v("時才會去變動集合，詳細的原理我們留到之後再深入討論。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h3",{attrs:{id:"select是所有查詢都必備的語法嗎"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#select是所有查詢都必備的語法嗎","aria-hidden":"true"}},[this._v("#")]),this._v(" Select是所有查詢都必備的語法嗎?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("記得以前在看LINQ的相關介紹時，第一章出現的幾乎都是Select，所以我一直以為它是一個Query Expressions的基本，就像是"),t("code",[this._v("from")]),this._v("一樣，你是不是也跟我的想法一樣呢? 如果是的話請繼續往下看。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("現在我們來想想: 一段查詢語法它的基本要件是什麼? 是什麼可以讓這段文字產生查詢的能力? 首先我們會想到的是"),t("strong",[this._v("選取資料來源")]),this._v("，沒有資料來源根本也不用做查詢了，那有了資料來源後還欠缺什麼呢? 最直覺的就是"),t("strong",[this._v("目標資料的結構")]),this._v("了，所以"),t("code",[this._v("Select")]),this._v("它是一個最直覺的查詢功能，從SQL的查詢與法也可以看出來。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("所以"),t("strong",[this._v("Select幾乎都會在文章的開頭出現")]),this._v("的謎底揭開了，因為人習慣以最直覺的開始講起，這樣的講述方式會讓人比較快熟悉並且進入狀況，所以"),t("code",[this._v("Select")]),this._v("自然變成每個作者筆下的第一頭牌了。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("那另一個問題浮現了: "),t("strong",[this._v("它是一個Query Expressions的必備語法嗎?")]),this._v(" 其實Select在LINQ的語法中其實"),t("strong",[this._v("不一定需要出現")]),this._v("，讓我們來看看下面的例子:")])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"language-C# extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[this._v("from x in Products\ngroup x by x.CategoryID\n")])])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[t("img",{attrs:{src:s(192),alt:"Without Select"}})])},function(){var e=this.$createElement,t=this._self._c||e;return t("blockquote",[t("p",[this._v("A query expression begins with a "),t("code",[this._v("from")]),this._v(" clause and ends with either a "),t("code",[this._v("select")]),this._v(" or "),t("code",[this._v("group")]),this._v(" clause.")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("所以我們的一段最基本的查詢運算式會以"),t("code",[this._v("from")]),this._v("開頭，"),t("code",[this._v("select")]),this._v("或"),t("code",[this._v("group")]),this._v("結尾，是不是顛覆了以往的想像呢?")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("上面的定義是在說"),t("strong",[this._v("查詢運算式")]),this._v("，在"),t("strong",[this._v("標準查詢運算子")]),this._v("上的規則又更為寬鬆了，因為它本身的回傳值是"),t("code",[this._v("IEnumerable")]),this._v("所以你只要是對其做事的方法都可以使用，也不用一定要先執行某個方法才能做查詢。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"結語"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#結語","aria-hidden":"true"}},[this._v("#")]),this._v(" 結語")])},function(){var e=this.$createElement,t=this._self._c||e;return t("p",[this._v("這章講述了Select的Query及Method的用法，在下一章學習如何建置"),t("strong",[this._v("corefx")]),this._v("後就可以來看看"),t("code",[this._v("Select")]),this._v("內到底在做什麼了。")])},function(){var e=this.$createElement,t=this._self._c||e;return t("h2",{attrs:{id:"參考"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#參考","aria-hidden":"true"}},[this._v("#")]),this._v(" 參考")])}],i=s(0),n=Object(i.a)({},function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"content"},[e._m(0),e._v(" "),e._m(1),e._v(" "),e._m(2),e._v(" "),s("p",[e._v("在應用的單元裡文章會被分為幾個小節:")]),e._v(" "),e._m(3),e._v(" "),s("p",[e._v("因應不同的語法章節內容會有微調。")]),e._v(" "),e._m(4),e._v(" "),e._m(5),e._v(" "),e._m(6),e._v(" "),s("p",[e._v("Select有兩個Public的方法如下:")]),e._v(" "),e._m(7),s("p",[s("code",[e._v("Select")]),e._v("只有一個傳入參數"),s("code",[e._v("Selector")]),e._v("，這個參數是一個"),s("router-link",{attrs:{to:"./06_Lambda.html"}},[e._v("委派")]),e._v("參數，而傳入的方法其實就是你想要對每一個元素什麼樣的事情。")],1),e._v(" "),e._m(8),e._v(" "),e._m(9),e._v(" "),s("p",[e._v("依照"),s("a",{attrs:{href:"https://docs.microsoft.com/en-us/dotnet/csharp/language-reference/language-specification/expressions#query-expressions",target:"_blank",rel:"noopener noreferrer"}},[e._v("C# Spec"),s("OutboundLink")],1),e._v("上的語法定義如下:")]),e._v(" "),e._m(10),e._m(11),e._v(" "),s("p",[e._v("看定義很難懂對不對? 我們先來看個例子吧:")]),e._v(" "),e._m(12),e._m(13),e._v(" "),e._m(14),e._v(" "),e._m(15),e._m(16),e._v(" "),e._m(17),e._v(" "),s("p",[e._v("看過"),s("router-link",{attrs:{to:"./08_WhatIsLINQ.html"}},[e._v("前一章")]),e._v("的介紹可以知道，其實"),s("strong",[e._v("查詢運算式會轉換成標準查詢運算子")]),e._v("，現在我們就用上節的查詢運算式例子轉換成標準查詢運算子看看:")],1),e._v(" "),e._m(18),s("p",[e._v("在這個例子的比對中我們可以發現:")]),e._v(" "),e._m(19),e._v(" "),e._m(20),e._v(" "),e._m(21),e._m(22),e._v(" "),e._m(23),e._v(" "),s("p",[e._v("Select這個看似平凡的語法其實也藏有一些玄機及特色，接下來我們就來看看吧。")]),e._v(" "),e._m(24),e._v(" "),s("p",[e._v("下面這個例子讓各位猜猜會不會跑很久:")]),e._v(" "),e._m(25),e._m(26),e._v(" "),e._m(27),e._v(" "),e._m(28),s("p",[e._v("下面是比較結果:")]),e._v(" "),e._m(29),e._v(" "),e._m(30),e._v(" "),e._m(31),e._v(" "),e._m(32),e._v(" "),e._m(33),e._v(" "),e._m(34),e._v(" "),e._m(35),e._v(" "),e._m(36),e._m(37),e._v(" "),s("p",[e._v("這裡請了"),s("code",[e._v("group")]),e._v("出來代班一下，我們可以看到這裡並沒有select，但這還是一個正確的查詢運算式，其實在"),s("a",{attrs:{href:"https://docs.microsoft.com/zh-tw/dotnet/csharp/language-reference/language-specification/expressions#query-expressions",target:"_blank",rel:"noopener noreferrer"}},[e._v("C#語言規格"),s("OutboundLink")],1),e._v("中在介紹Query Experssions的章節有提到下面這段解釋:")]),e._v(" "),e._m(38),e._v(" "),e._m(39),e._v(" "),e._m(40),e._v(" "),e._m(41),e._v(" "),e._m(42),e._v(" "),e._m(43),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-us/dotnet/api/system.linq.enumerable.select?view=netframework-4.7.1",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Docs-system.linq.enumerable.select"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/zh-tw/dotnet/csharp/language-reference/language-specification/expressions#query-expressions",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Docs-expressions#query-expressions"),s("OutboundLink")],1)]),e._v(" "),s("li",[s("a",{attrs:{href:"https://docs.microsoft.com/en-us/dotnet/csharp/programming-guide/concepts/linq/classification-of-standard-query-operators-by-manner-of-execution",target:"_blank",rel:"noopener noreferrer"}},[e._v("Microsoft Docs-classification-of-standard-query-operators-by-manner-of-execution"),s("OutboundLink")],1)])])])},r,!1,null,null,null);t.default=n.exports}}]);